## インデックス化 (実験的機能)

もし同じ文書ファイルを対象に検索を繰り返す場合は、文書ファイルをインデックス化することを検討してみてください。

`dvg`のインデックスの実体は、検索対象の文書の意味を表現するベクトルを近似した小さなデータです。インデックスにより文書検索において文書の足切りを行い、検索速度を向上させます。

ただし、 **近似精度の問題により本来検索結果になるべき文書の一部が排除され出力されなくなります**。利用に際してはこの点に注意してください。

#### インデックス化の利用法

(1) インデックス化を行うには、文書ファイルが置いてあるディレクトリをカレントディレクトリにして、そのディレクトリで`dvgi --build`コマンドを実行します。

```sh
dvgi --build -m ja <文書ファイル>...
```

コマンドの名前が`dvgi`に替わっていることに注意してください。また、インデックス化を行うときに指定する文書ファイルは、以後の検索で対象となる可能性があるすべての文書ファイルとしてください。

このコマンドを実行することにより、カレントディレクトリに`.dvg`というサブディレクトリが作成され、インデックスDBが置かれます。

(2) インデックスDBを利用して検索を行うには、インデックス化を行ったときと同じカレントディレクトリで、コマンドを`dvg`を`dvgi`に変更したコマンドラインを実行してください。

```sh
dvgi -v -m ja <クエリとなるフレーズ> <文書ファイル>...
```

インデックスDBの作成の例:  
![](images/run9.png)

インデックスDBを利用した検索（と通常の検索との比較）の例:  
![](images/run10.png)
